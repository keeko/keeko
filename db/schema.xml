<?xml version="1.0" encoding="UTF-8"?>
<database defaultIdMethod="native" name="keeko">
<table name="language">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="name" type="VARCHAR" size="64"/>
<column name="country" type="VARCHAR" size="2"/>
<column name="language" type="VARCHAR" size="2"/>
<column name="variant" type="VARCHAR" size="2"/>
<column name="is_default" type="BOOLEAN"/>
<column name="url" type="VARCHAR" size="255"/>
<unique name="unique">
<unique-column name="url"/>
</unique>
</table>
<table name="language_text">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="language_id" type="INTEGER" size="10" required="true"/>
<column name="content" type="LONGVARCHAR"/>
<foreign-key foreignTable="language" name="language_text" onDelete="cascade">
<reference local="language_id" foreign="id"/>
</foreign-key>
</table>
<table name="page">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="parent_id" type="INTEGER" size="10" required="true"/>
<column name="keywords_id" type="INTEGER" size="10" required="true"/>
<column name="description_id" type="INTEGER" size="10" required="true"/>
<column name="title_id" type="INTEGER" size="10" required="true"/>
<column name="is_user" type="BOOLEAN"/>
<foreign-key foreignTable="language_text" name="page_title" onDelete="cascade">
<reference local="title_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="language_text" name="page_description" onDelete="cascade">
<reference local="description_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="language_text" name="page_keywords" onDelete="cascade">
<reference local="keywords_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="page" name="parent" onDelete="restrict">
<reference local="parent_id" foreign="id"/>
</foreign-key>
</table>
<table name="layout">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="page_id" type="INTEGER" size="10"/>
<foreign-key foreignTable="page" name="Rel_31" onDelete="restrict">
<reference local="page_id" foreign="id"/>
</foreign-key>
</table>
<table name="grid">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="grid_id" type="INTEGER" size="10"/>
<column name="layout_id" type="INTEGER" size="10"/>
<column name="classnames" type="VARCHAR" size="255"/>
<foreign-key foreignTable="layout" name="layout_has_grid" onDelete="cascade">
<reference local="layout_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="grid" name="parent" onDelete="cascade">
<reference local="grid_id" foreign="id"/>
</foreign-key>
</table>
<table name="unit">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="grid_id" type="INTEGER" size="10" required="true"/>
<foreign-key foreignTable="grid" name="grid_units" onDelete="cascade">
<reference local="grid_id" foreign="id"/>
</foreign-key>
</table>
<table name="block">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="name" type="VARCHAR" size="64"/>
<column name="is_content" type="BOOLEAN"/>
</table>
<table name="setting">
<column name="keyname" type="VARCHAR" size="64" primaryKey="true" required="true"/>
<column name="cat_id" type="INTEGER" size="10" required="true"/>
<column name="section_id" type="INTEGER" size="10" required="true"/>
<column name="module_id" type="INTEGER" size="10" required="true"/>
<column name="value" type="LONGVARCHAR"/>
<column name="format" type="INTEGER" size="8"/>
<column name="hide" type="BOOLEAN"/>
<foreign-key foreignTable="setting_cat" name="settings_cat" onDelete="restrict">
<reference local="cat_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="module" name="module_setting" onDelete="restrict">
<reference local="module_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="setting_section" name="settings_section" onDelete="restrict">
<reference local="section_id" foreign="id"/>
</foreign-key>
</table>
<table name="setting_cat">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="name_id" type="INTEGER" size="10" required="true"/>
<foreign-key foreignTable="language_text" name="Rel_46" onDelete="restrict">
<reference local="name_id" foreign="id"/>
</foreign-key>
</table>
<table name="module">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="unixname" type="VARCHAR" size="32"/>
<column name="version" type="VARCHAR" size="10"/>
</table>
<table name="action">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="module_id" type="INTEGER" size="10" required="true"/>
<column name="name" type="VARCHAR" size="32"/>
<foreign-key foreignTable="module" name="module_actions" onDelete="cascade">
<reference local="module_id" foreign="id"/>
</foreign-key>
</table>
<table name="menu">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="unit_id" type="INTEGER" size="10"/>
<column name="block_id" type="INTEGER" size="10"/>
<column name="name" type="VARCHAR" size="64"/>
<column name="is_admin" type="BOOLEAN"/>
<foreign-key foreignTable="block" name="menu_block" onDelete="restrict">
<reference local="block_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="unit" name="menu_in_unit" onDelete="restrict">
<reference local="unit_id" foreign="id"/>
</foreign-key>
</table>
<table name="menu_item">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="parent_id" type="INTEGER" size="10" default="NULL"/>
<column name="menu_id" type="INTEGER" size="10" required="true"/>
<column name="text_id" type="INTEGER" size="10" required="true"/>
<column name="page_id" type="INTEGER" size="10" default="NULL"/>
<column name="module_id" type="INTEGER" size="10" default="NULL"/>
<column name="action_id" type="INTEGER" size="10" default="NULL"/>
<column name="event" type="INTEGER" size="8"/>
<column name="image" type="VARCHAR" size="255"/>
<column name="sortorder" type="INTEGER" size="10"/>
<column name="extra" type="VARCHAR" size="255"/>
<foreign-key foreignTable="page" name="menu_item_page" onDelete="restrict">
<reference local="page_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="language_text" name="item_text" onDelete="restrict">
<reference local="text_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="menu" name="menu_item" onDelete="restrict">
<reference local="menu_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="menu_item" name="parent" onDelete="restrict">
<reference local="parent_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="module" name="Rel_47" onDelete="restrict">
<reference local="module_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="action" name="Rel_48" onDelete="restrict">
<reference local="action_id" foreign="id"/>
</foreign-key>
</table>
<table name="role">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="user_id" type="INTEGER" size="10" required="true"/>
<column name="name" type="VARCHAR" size="64"/>
<column name="is_guest" type="BOOLEAN"/>
<column name="is_default" type="BOOLEAN"/>
<column name="is_active" type="BOOLEAN" default="1"/>
<column name="is_system" type="BOOLEAN" default="0"/>
<foreign-key foreignTable="user" name="usergroup" onDelete="restrict">
<reference local="user_id" foreign="id"/>
</foreign-key>
</table>
<table name="role_action">
<column name="action_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="role_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<foreign-key foreignTable="role" name="Rel_18" onDelete="restrict">
<reference local="role_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="action" name="Rel_19" onDelete="restrict">
<reference local="action_id" foreign="id"/>
</foreign-key>
</table>
<table name="user">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="name" type="VARCHAR" size="64"/>
<column name="passwd" type="VARCHAR" size="32"/>
<column name="first_name" type="VARCHAR" size="64"/>
<column name="last_name" type="VARCHAR" size="64"/>
<column name="birth" type="DATE"/>
<column name="created" type="TIMESTAMP"/>
<column name="email" type="VARCHAR" size="255"/>
<column name="gender" type="CHAR" size="1"/>
</table>
<table name="role_user">
<column name="user_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="role_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<foreign-key foreignTable="role" name="Rel_20" onDelete="restrict">
<reference local="role_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="user" name="Rel_21" onDelete="restrict">
<reference local="user_id" foreign="id"/>
</foreign-key>
</table>
<table name="page_permission">
<column name="page_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="role_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<foreign-key foreignTable="role" name="Rel_23" onDelete="restrict">
<reference local="role_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="page" name="Rel_24" onDelete="restrict">
<reference local="page_id" foreign="id"/>
</foreign-key>
</table>
<table name="user_setting">
<column name="keyname" type="VARCHAR" size="64" primaryKey="true" required="true"/>
<column name="module_id" type="INTEGER" size="10"/>
<column name="format" type="INTEGER" size="8"/>
<foreign-key foreignTable="module" name="user_setting_module" onDelete="restrict">
<reference local="module_id" foreign="id"/>
</foreign-key>
</table>
<table name="user_ext">
<column name="keyname" type="VARCHAR" size="64" primaryKey="true" required="true"/>
<column name="name_id" type="INTEGER" size="10" required="true"/>
<column name="cat_id" type="INTEGER" size="10" required="true"/>
<column name="hide" type="BOOLEAN"/>
<column name="format" type="INTEGER" size="8"/>
<foreign-key foreignTable="language_text" name="language_key" onDelete="restrict">
<reference local="name_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="user_ext_cat" name="user_ext_cat" onDelete="restrict">
<reference local="cat_id" foreign="id"/>
</foreign-key>
</table>
<table name="user_ext_cat">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="title_id" type="INTEGER" size="10" required="true"/>
<foreign-key foreignTable="language_text" name="language_title" onDelete="restrict">
<reference local="title_id" foreign="id"/>
</foreign-key>
</table>
<table name="user_ext_val">
<column name="keyname" type="VARCHAR" size="64" primaryKey="true" required="true"/>
<column name="user_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="value" type="LONGVARCHAR"/>
<foreign-key foreignTable="user" name="Rel_31" onDelete="restrict">
<reference local="user_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="user_ext" name="Rel_32" onDelete="restrict">
<reference local="keyname" foreign="keyname"/>
</foreign-key>
</table>
<table name="page_css">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="page_id" type="INTEGER" size="10" required="true"/>
<column name="path" type="VARCHAR" size="255"/>
<foreign-key foreignTable="page" name="Rel_33" onDelete="restrict">
<reference local="page_id" foreign="id"/>
</foreign-key>
</table>
<table name="page_js">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="page_id" type="INTEGER" size="10" required="true"/>
<column name="path" type="VARCHAR" size="255"/>
<foreign-key foreignTable="page" name="Rel_34" onDelete="restrict">
<reference local="page_id" foreign="id"/>
</foreign-key>
</table>
<table name="unit_action">
<column name="unit_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="action_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="param_id" type="INTEGER" size="10" required="true"/>
<foreign-key foreignTable="unit" name="Rel_35" onDelete="restrict">
<reference local="unit_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="action" name="Rel_36" onDelete="restrict">
<reference local="action_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="param" name="action_has_param" onDelete="restrict">
<reference local="param_id" foreign="id"/>
</foreign-key>
</table>
<table name="param">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="keyname" type="VARCHAR" size="255"/>
<column name="value" type="VARCHAR" size="255"/>
</table>
<table name="layout_grid">
<column name="layout_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="grid_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<foreign-key foreignTable="layout" name="Rel_38" onDelete="restrict">
<reference local="layout_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="grid" name="Rel_39" onDelete="restrict">
<reference local="grid_id" foreign="id"/>
</foreign-key>
</table>
<table name="block_action">
<column name="block_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="action_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="param_id" type="INTEGER" size="10" required="true"/>
<foreign-key foreignTable="block" name="Rel_40" onDelete="restrict">
<reference local="block_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="action" name="Rel_41" onDelete="restrict">
<reference local="action_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="param" name="Rel_42" onDelete="restrict">
<reference local="param_id" foreign="id"/>
</foreign-key>
</table>
<table name="user_setting_value">
<column name="user_id" type="INTEGER" size="10" primaryKey="true" required="true"/>
<column name="keyname" type="VARCHAR" size="64" primaryKey="true" required="true"/>
<column name="value" type="LONGVARCHAR"/>
<foreign-key foreignTable="user_setting" name="Rel_43" onDelete="restrict">
<reference local="keyname" foreign="keyname"/>
</foreign-key>
<foreign-key foreignTable="user" name="Rel_44" onDelete="restrict">
<reference local="user_id" foreign="id"/>
</foreign-key>
</table>
<table name="setting_section">
<column name="id" type="INTEGER" size="10" primaryKey="true" required="true" autoIncrement="true"/>
<column name="name_id" type="INTEGER" size="10" required="true"/>
<foreign-key foreignTable="language_text" name="Rel_44" onDelete="restrict">
<reference local="name_id" foreign="id"/>
</foreign-key>
</table>
</database>
